<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  </head>
  <body leftmargin="0" marginwidth="0" topmargin="0" marginheight="0" offset="0">
    <%- if git_log %>
      <h3>Commits:</h3>
      <table>
        <tbody>
          <%- git_log.each do |commit| -%>
            <tr>
              <td><a href="<%= "#{giturl}/commits/#{commit[:hash]}" %>"><%= commit[:hash] %></a></td>
              <td><%= commit[:message] %></td>
              <td><%= commit[:user] %></td>
              <td><%= commit[:date] %></td>
            </tr>
          <%- end -%>
        </tbody>
      </table>
    <%- end -%>

    <h3>Details:</h3>
    <table>
      <tbody>
        <tr>
          <td><strong>Deployer:</strong></td>
          <td><%= user_name %></td>
        </tr>
        <tr>
          <td><strong>Application:</strong></td>
          <td><%= application.titleize %></td>
        </tr>
        <tr>
          <td><strong>Branch:</strong></td>
          <td><%= branch %></td>
        </tr>
        <tr>
          <td><strong>Environment:</strong></td>
          <td><%= stage %></td>
        </tr>
        <tr>
          <td><strong>Time:</strong></td>
          <td><%= now.strftime("%m/%d/%Y") %> at <%= now.strftime("%I:%M %p %Z") %></td>
        </tr>
      </tbody>
    </table>

    <!-- Disable compare currently: does not work in bitbucket (2020-02-03) -->
    <!-- <h3>Compare:</h3>
    <p><%#= git_compare_prefix %>/<%#= git_range.nil? ? '' : git_range.gsub('..', '...')%></p> -->

  </body>
</html>
